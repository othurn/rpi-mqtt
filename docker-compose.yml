version: "3"
services:
  mqtt:
    image: arm32v6/eclipse-mosquitto
    environment:
      - REST_SERVER=http://rest:7070
    restart: unless-stopped
    container_name: "MQTT"
    ports:
      - 1883:1883
      - 9001:9001
    expose:
      - 1883
  
  ui:
    build:
      context: ./web   
    ports:
      - 5050:5050
    volumes:
      - ./web/sources:/app
    container_name: web_server

  rest:
    build:
      context: ./rest_server
    ports:
      - 7070:7070
    volumes:
      - ./rest_server/src:/app
    container_name: rest_server

